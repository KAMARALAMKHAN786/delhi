"use strict";(()=>{var e={};e.id=810,e.ids=[220,636,810],e.modules={3702:(e,t)=>{Object.defineProperty(t,"M",{enumerable:!0,get:function(){return function e(t,r){return r in t?t[r]:"then"in t&&"function"==typeof t.then?t.then(function(t){return e(t,r)}):"function"==typeof t&&"default"===r?t:void 0}}})},9870:(e,t)=>{Object.defineProperty(t,"A",{enumerable:!0,get:function(){return r}});var r=function(e){return e.PAGES="PAGES",e.PAGES_API="PAGES_API",e.APP_PAGE="APP_PAGE",e.APP_ROUTE="APP_ROUTE",e.IMAGE="IMAGE",e}({})},2095:(e,t,r)=>{r.a(e,async(e,n)=>{try{r.r(t),r.d(t,{config:()=>m,default:()=>d,getServerSideProps:()=>g,getStaticPaths:()=>f,getStaticProps:()=>p,reportWebVitals:()=>b,routeModule:()=>w,unstable_getServerProps:()=>P,unstable_getServerSideProps:()=>y,unstable_getStaticParams:()=>x,unstable_getStaticPaths:()=>v,unstable_getStaticProps:()=>h});var a=r(2846),o=r(9870),s=r(3702),u=r(1563),l=r(5891),i=r(7689),c=e([l,i]);[l,i]=c.then?(await c)():c;let d=(0,s.M)(i,"default"),p=(0,s.M)(i,"getStaticProps"),f=(0,s.M)(i,"getStaticPaths"),g=(0,s.M)(i,"getServerSideProps"),m=(0,s.M)(i,"config"),b=(0,s.M)(i,"reportWebVitals"),h=(0,s.M)(i,"unstable_getStaticProps"),v=(0,s.M)(i,"unstable_getStaticPaths"),x=(0,s.M)(i,"unstable_getStaticParams"),P=(0,s.M)(i,"unstable_getServerProps"),y=(0,s.M)(i,"unstable_getServerSideProps"),w=new a.PagesRouteModule({definition:{kind:o.A.PAGES,page:"/AdminBlogPosts",pathname:"/AdminBlogPosts",bundlePath:"",filename:""},components:{App:l.default,Document:u.default},userland:i});n()}catch(e){n(e)}})},5646:(e,t,r)=>{r.d(t,{A:()=>o});var n=r(2015),a=r.n(n)().createElement;let o=function(){return a("div",{className:"flex justify-center items-center h-full"},a("div",{className:"loader ease-linear rounded-full border-8 border-t-8 border-gray-200 h-16 w-16"}))}},6204:(e,t,r)=>{r.d(t,{V:()=>s});var n=r(8293),a=r(4845),o=r.n(a),s=function(){var e=(0,n.A)(o().mark(function e(t){var r,n,a,s,u,l,i;return o().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,r="dmbabahte",n=process.env.NEXT_PUBLIC_CLOUDINARY_UPLOAD_PRESET||"ml_default",r){e.next=5;break}throw Error("Cloudinary cloud name is missing.");case 5:if(n){e.next=7;break}throw Error("Cloudinary upload preset is missing.");case 7:return(a=new FormData).append("file",t),a.append("upload_preset",n),e.next=12,fetch("https://api.cloudinary.com/v1_1/".concat(r,"/image/upload"),{method:"POST",body:a});case 12:if((s=e.sent).ok){e.next=18;break}return e.next=16,s.json();case 16:throw l=e.sent,Error("Cloudinary Upload Failed: ".concat((null===(u=l.error)||void 0===u?void 0:u.message)||"Unknown error"));case 18:return e.next=20,s.json();case 20:return i=e.sent.secure_url.replace("/upload/","/upload/f_webp,q_auto:eco/"),e.abrupt("return",i);case 25:throw e.prev=25,e.t0=e.catch(0),console.error("Image Upload Error:",e.t0),e.t0;case 29:case"end":return e.stop()}},e,null,[[0,25]])}));return function(t){return e.apply(this,arguments)}}()},7689:(e,t,r)=>{r.a(e,async(e,n)=>{try{r.r(t),r.d(t,{default:()=>v,getStaticProps:()=>x});var a=r(8293),o=r(4845),s=r.n(o),u=r(2015),l=r.n(u),i=r(5062),c=r(6204),d=r(5646),p=r(1954),f=r(2893),g=r(7912),m=r.n(g),b=e([f]);f=(b.then?(await b)():b)[0];var h=l().createElement;function v(e){var t,r,n,o=e.initialPosts,g=e.userId;(0,p.useRouter)();var b=(0,u.useState)(o),v=b[0],x=b[1],P=(0,u.useState)(!1),y=P[0],w=P[1],S=(0,u.useState)(""),_=S[0],A=S[1],E=(0,u.useState)(""),N=E[0],k=E[1],M=(0,u.useState)(null),q=M[0],C=M[1],j=(0,u.useState)(null),I=j[0],G=j[1],O=(t=(0,a.A)(s().mark(function e(){var t,r;return s().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,w(!0),e.next=4,i.N.from("blog_posts").select("*").order("created_at",{ascending:!1});case 4:r=(t=e.sent).data,t.error?f.default.error("Error fetching blog posts"):x(r||[]);case 8:return e.prev=8,w(!1),e.finish(8);case 11:case"end":return e.stop()}},e,null,[[0,,8,11]])})),function(){return t.apply(this,arguments)}),U=(r=(0,a.A)(s().mark(function e(){var t;return s().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t="",g){e.next=4;break}return f.default.error("No user session found. Please log in again."),e.abrupt("return");case 4:if(!q){e.next=15;break}return e.prev=5,e.next=8,(0,c.V)(q);case 8:t=e.sent,e.next=15;break;case 11:return e.prev=11,e.t0=e.catch(5),f.default.error("Error uploading image"),e.abrupt("return");case 15:if(!I){e.next=23;break}return e.next=18,i.N.from("blog_posts").update({title:_,content:N,image_url:t,updated_at:new Date().toISOString()}).eq("id",I);case 18:e.sent.error?f.default.error("Error updating post"):f.default.success("Post updated successfully"),e.next=28;break;case 23:return e.next=25,i.N.from("blog_posts").insert({title:_,content:N,image_url:t,author_id:g});case 25:e.sent.error?f.default.error("Error creating post"):f.default.success("Post created successfully");case 28:A(""),k(""),C(null),G(null),O();case 33:case"end":return e.stop()}},e,null,[[5,11]])})),function(){return r.apply(this,arguments)}),R=function(e){A(e.title),k(e.content),C(null),G(e.id)},B=(n=(0,a.A)(s().mark(function e(t){return s().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i.N.from("blog_posts").delete().eq("id",t);case 2:e.sent.error?f.default.error("Error deleting post"):f.default.success("Post deleted successfully"),O();case 6:case"end":return e.stop()}},e)})),function(e){return n.apply(this,arguments)});return y?h(d.A,null):h(l().Fragment,null,h(m(),null,h("title",null,"Admin Blog Posts"),h("meta",{name:"description",content:"Manage blog posts in the admin dashboard."})),h("div",{className:"max-w-4xl mx-auto p-6 bg-white shadow-lg rounded-xl text-gray-900"},h("h1",{className:"text-3xl font-bold mb-6 text-center"},"Manage Blog Posts"),h("div",{className:"mb-6 space-y-4 bg-gray-100 p-4 rounded-lg shadow"},h("input",{type:"text",className:"w-full p-3 border rounded-lg focus:ring-2 focus:ring-blue-500",placeholder:"Title",value:_,onChange:function(e){return A(e.target.value)}}),h("textarea",{className:"w-full p-3 border rounded-lg focus:ring-2 focus:ring-blue-500",placeholder:"Content",value:N,onChange:function(e){return k(e.target.value)}}),h("input",{type:"file",accept:"image/*",onChange:function(e){var t;return C((null===(t=e.target.files)||void 0===t?void 0:t[0])||null)},className:"w-full p-3 border rounded-lg bg-white"}),h("button",{className:"w-full bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition",onClick:U},I?"Update Post":"Create Post")),h("div",{className:"space-y-4"},v.map(function(e){return h("div",{key:e.id,className:"p-6 bg-gray-100 rounded-lg shadow"},h("h2",{className:"text-2xl font-semibold mb-2"},e.title),e.image_url&&h("img",{src:e.image_url,alt:e.title,className:"mb-4 w-full h-64 object-cover rounded-lg"}),h("p",{className:"text-gray-700 mb-4"},e.content),h("div",{className:"flex space-x-4"},h("button",{className:"bg-yellow-500 text-white px-4 py-2 rounded-lg hover:bg-yellow-600 transition",onClick:function(){return R(e)}},"Edit"),h("button",{className:"bg-red-500 text-white px-4 py-2 rounded-lg hover:bg-red-600 transition",onClick:function(){return B(e.id)}},"Delete")))}),0===v.length&&h("p",{className:"text-center text-gray-500"},"No blog posts found"))))}var x=function(){var e=(0,a.A)(s().mark(function e(){return s().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",{props:{initialPosts:[],userId:null}});case 1:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}();n()}catch(e){n(e)}})},1563:(e,t,r)=>{r.r(t),r.d(t,{default:()=>g});var n=r(4943),a=r(6107),o=r(7324),s=r(9902),u=r(2552),l=r(2015),i=r.n(l),c=r(6918),d=r.n(c),p=i().createElement;function f(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(f=function(){return!!e})()}let g=function(e){(0,o.A)(l,e);var t,r=(t=f(),function(){var e,r=(0,u.A)(l);return e=t?Reflect.construct(r,arguments,(0,u.A)(this).constructor):r.apply(this,arguments),(0,s.A)(this,e)});function l(){return(0,n.A)(this,l),r.apply(this,arguments)}return(0,a.A)(l,[{key:"render",value:function(){return p(c.Html,null,p(c.Head,null,p("meta",{charSet:"utf-8"}),p("meta",{name:"viewport",content:"width=device-width, initial-scale=1"})),p("body",null,p(c.Main,null),p(c.NextScript,null)))}}]),l}(d())},3939:e=>{e.exports=require("@supabase/supabase-js")},361:e=>{e.exports=require("next/dist/compiled/next-server/pages.runtime.prod.js")},7912:e=>{e.exports=require("next/head")},2015:e=>{e.exports=require("react")},2326:e=>{e.exports=require("react-dom")},8732:e=>{e.exports=require("react/jsx-runtime")},9021:e=>{e.exports=require("fs")},3873:e=>{e.exports=require("path")},7910:e=>{e.exports=require("stream")},4075:e=>{e.exports=require("zlib")},2893:e=>{e.exports=import("react-hot-toast")}};var t=require("../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),n=t.X(0,[273,766,210,891],()=>r(2095));module.exports=n})();